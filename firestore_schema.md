# Firestore Schema for EvidencePackBuilder

This document outlines the proposed Firestore schema for the `EvidencePackBuilder` service. The schema is designed to store and manage evidence packs, which are collections of digital evidence related to specific events or investigations.

## Collections

### `evidencePacks`

This collection stores the main evidence pack documents. Each document represents a single evidence pack.

| Field Name        | Type      | Description                                                                 |
| :---------------- | :-------- | :-------------------------------------------------------------------------- |
| `id`              | `string`  | Unique identifier for the evidence pack (auto-generated by Firestore).      |
| `name`            | `string`  | Human-readable name of the evidence pack.                                   |
| `description`     | `string`  | Detailed description of the evidence pack.                                  |
| `createdAt`       | `timestamp` | Timestamp when the evidence pack was created.                               |
| `updatedAt`       | `timestamp` | Timestamp when the evidence pack was last updated.                          |
| `status`          | `string`  | Current status of the evidence pack (e.g., `draft`, `pending`, `completed`).|
| `createdBy`       | `string`  | User ID of the creator of the evidence pack.                                |
| `tags`            | `array`   | List of tags for categorization and searching.                              |

### `evidenceItems` (Subcollection under `evidencePacks`)

This subcollection stores individual evidence items associated with a specific `evidencePack`. Each document represents a single piece of evidence.

| Field Name        | Type      | Description                                                                 |
| :---------------- | :-------- | :-------------------------------------------------------------------------- |
| `id`              | `string`  | Unique identifier for the evidence item (auto-generated by Firestore).      |
| `packId`          | `string`  | ID of the parent evidence pack.                                             |
| `type`            | `string`  | Type of evidence (e.g., `file`, `screenshot`, `log`, `network_request`).  |
| `description`     | `string`  | Description of the evidence item.                                           |
| `url`             | `string`  | URL or path to the stored evidence (e.g., S3 URL, GCS URL).                 |
| `mimeType`        | `string`  | MIME type of the evidence (e.g., `image/png`, `application/json`).          |
| `createdAt`       | `timestamp` | Timestamp when the evidence item was added.                                 |
| `createdBy`       | `string`  | User ID of the user who added the evidence item.                            |
| `metadata`        | `map`     | Additional metadata specific to the evidence type (e.g., file hash, size).  |

## Example Data Structure

```json
{
  "evidencePacks": {
    "pack123": {
      "name": "Incident Report 2023-01-15",
      "description": "Evidence collected for a security incident on January 15, 2023.",
      "createdAt": "2023-01-15T10:00:00Z",
      "updatedAt": "2023-01-15T10:30:00Z",
      "status": "completed",
      "createdBy": "user_abc",
      "tags": ["security", "incident", "2023"],
      "evidenceItems": {
        "item456": {
          "packId": "pack123",
          "type": "file",
          "description": "Screenshot of compromised system.",
          "url": "https://storage.googleapis.com/evidence-bucket/pack123/screenshot.png",
          "mimeType": "image/png",
          "createdAt": "2023-01-15T10:10:00Z",
          "createdBy": "user_abc",
          "metadata": {
            "fileHash": "sha256:abcdef1234567890",
            "fileSize": 123456
          }
        },
        "item789": {
          "packId": "pack123",
          "type": "log",
          "description": "Relevant server logs.",
          "url": "https://storage.googleapis.com/evidence-bucket/pack123/server.log",
          "mimeType": "text/plain",
          "createdAt": "2023-01-15T10:15:00Z",
          "createdBy": "user_abc",
          "metadata": {
            "logSource": "web_server",
            "lines": 500
          }
        }
      }
    }
  }
}
```
